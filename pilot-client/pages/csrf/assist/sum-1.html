<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<link rel='stylesheet' href='../../../plugins/googleapis/fonts.css'>
<link rel="stylesheet" href="../../../dist/css/markdown.css">
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><ul><li><p><strong><span>CSRF漏洞介绍</span></strong></p><p><span>跨站请求伪造（Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF 或者 XSRF， 是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。</span></p></li></ul><p></br></p><ul><li><p><strong><span>CSRF漏洞原理</span></strong></p><p><span>攻击者通过一些技术手段欺骗用户的浏览器去访问一个用户自己曾经认证过的网站并执行一些操作（如发邮件，发消息，甚至财产操作如转账和购买商品）。由于浏览器曾经认证过，所以被访问的网站会认为是真正的用户操作而去执行。这利用了web中用户身份验证的一个漏洞：简单的身份验证只能保证请求是发自某个用户的浏览器，却不能保证请求本身是用户自愿发出的。</span></p></li></ul><p></br></p><ul><li><p><strong><span>CSRF成因拓展之同源策略</span></strong></p><p><span>1995年，同源策略由Netscape公司引入浏览器。目前，所有浏览器都实行这个策略。最初，他的含义是指：A网页设置的Cookie，B网页不能打开，除非这两个网页同源。</span></p><p><span>所谓同源指的是三个相同：协议相同、域名相同、端口相同。</span></p><p><span>详细了解：</span><a href='https://blog.csdn.net/wuli1024/article/details/135414799' target="_blank"><span>CSDN-前端网络安全必修 1 同源策略和CSRF</span></a></p></li></ul><p></br></p><ul><li><p><strong><span>CSRF攻击流程</span></strong></p><ol start='' ><li><p><span>用户正常登录web服务，并一直保持在线。</span></p></li><li><p><span>服务器返回用户凭证Session，并将其保存在Cookie中。</span></p></li><li><p><span>攻击者生成payload，并放置在用户可访问的地方。</span></p></li><li><p><span>攻击者诱导用户点击在第3步放置的链接，此时用户一直在线，且是用同一浏览器打开（保证Cookie未失效）。</span></p></li><li><p><span>用户点击恶意链接。</span></p></li><li><p><span>恶意链接向服务器请求，由于用户Cookie未失效，就携带用户Cookie访问服务器。</span></p></li><li><p><span>服务器收到请求，此时用户Cookie未失效，并判定为用户发起的正常请求，并做出响应。</span></p></li></ol></li></ul><p></br></p><ul><li><p><strong><span>CSRF漏洞危害</span></strong></p><p><span>非法操作、数据泄露、拒绝服务等。</span></p></li></ul><p></br></p><ul><li><p><strong><span>CSRF与XSS的区别</span></strong></p><ol start='' ><li><p><span>攻击方式不同：</span></p></li></ol><ul><li><p><span>CSRF攻击利用Web应用程序对请求的不完全验证，攻击者通过欺骗用户在已经登录的Web应用程序中执行恶意操作。</span></p></li><li><p><span>而XSS攻击则是通过在Web页面中注入恶意脚本来实现攻击，当用户浏览受到攻击的页面时，恶意脚本会被执行，从而盗取用户的信息或执行其他恶意操作。</span></p></li></ul><ol start='2' ><li><p><span>目标不同：</span></p></li></ol><ul><li><p><span>CSRF攻击的目标是利用用户的身份执行恶意操作，例如，在用户不知情的情况下，利用用户的账户进行转账或修改密码等操作。</span></p></li><li><p><span>而XSS攻击的目标则是窃取用户的信息，例如，窃取用户的cookie、用户名和密码等敏感信息。</span></p></li></ul><ol start='3' ><li><p><span>防御方式不同：</span></p></li></ol><ul><li><p><span>CSRF攻击的防御需要验证请求的来源和使用随机令牌等方法进行身份验证，避免未经授权的操作。</span></p></li><li><p><span>而XSS攻击的防御需要对输入的数据进行过滤和编码，避免恶意脚本的注入。</span></p></li></ul></li></ul><p></br></p><ul><li><p><strong><span>CSRF漏洞防御</span></strong></p><ol start='' ><li><p><span>添加校验Token或CSRF Token</span></p></li><li><p><span>检查Referer字段</span></p></li><li><p><span>添加其他自定义字段作为前端二次验证，例如时间戳</span></p></li><li><p><span>令牌同步模式（Synchronizer token pattern）</span></p></li><li><p><span>使用验证码或其他二次验证方式</span></p></li><li><p><span>使用SameSite Cookie</span></p></li></ol></li></ul><p></br></p><ul><li><p><strong><span>推荐学习文章</span></strong></p><ol start='' ><li><p><a href='https://blog.gm7.org/%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E5%BA%93/01.%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/02.WEB%E6%BC%8F%E6%B4%9E/03.CSRF/01.CSRF.html' target="_blank"><span>d4m1ts知识库-CSRF</span></a></p></li><li><p><a href='https://blog.csdn.net/qq_45803593/article/details/124727762' target="_blank"><span>CSDN-CSRF简介</span></a></p></li><li><p><a href='https://blog.csdn.net/leiwuhen92/article/details/128724402' target="_blank"><span>CSDN-CSRF(跨站请求伪造)</span></a></p></li><li><p><a href='https://blog.csdn.net/lady_killer9/article/details/107874328' target="_blank"><span>CSDN-网络安全-跨站请求伪造（CSRF）的原理、攻击及防御</span></a></p></li></ol></li></ul></div></div>
</body>
</html>